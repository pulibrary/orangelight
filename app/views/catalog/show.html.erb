<%= render 'previous_next_doc' %>
<div id="main-content" class="col-sm-9 col-xs-12 main-content">
  <%= render_document_heading_partial %>
  <div id="sidebar" class="col-sm-2 col-xs-12 <%= render_document_class %>">
    <%= render_document_sidebar_partial %>
  </div>
  <div id="content" class="col-sm-10 col-xs-12 content">
    <%= render_document_main_content_partial %>
      <% if @document.voyager_record? %>
        <dl class="dl-horizontal dl-invert">
          <dt class="other-views">Other views:</dt>
          <dd class="classic-views">
            <%= link_to t('blacklight.tools.librarian_view'), staff_view_solr_document_path(@document), {:id => 'staffLink'} %>
          </dd>
        </dl>
      <% end %>
  </div>
</div>
<% if render_availability? %>
  <div id="availability" class="col-sm-3 col-xs-12 record-availability">
    <%= render partial: 'show_availability_sidebar', locals: { document: @document } %>
  </div>
<% end %>
<div class="col-sm-12 col-xs-12" >
  <% if @document.iiif_manifest_uris.present? %>
    <div id="arks_length" class="sr-only"><%= @document.iiif_manifest_uris.count %></div>
    <%  @document.iiif_manifest_uris.each_with_index do |uri,i| %>
      <% if i == 0 %>
        <div id="view" data-ark="<%= @document.ark %>" data-iiif-manifest-url="<%= uri %>" class="intrinsic-container intrinsic-container-16x9">
          <iframe src="https://figgy-staging.princeton.edu/uv/uv#?manifest=<%= uri %>" allowfullscreen="true"></iframe>
        </div>
      <% else %>
        <div id="view_<%= i %>" data-ark="<%= @document.ark %>" data-iiif-manifest-url="<%= uri %>" class="intrinsic-container intrinsic-container-16x9">
          <iframe src="https://figgy-staging.princeton.edu/uv/uv#?manifest=<%= uri %>" allowfullscreen="true"></iframe>
        </div>
      <% end %>
    <% end %>
  <% elsif @document.ark.present? %>
    <div id="ark_array_id" class="sr-only" data-ark="<%= ark_array %>"></div>
      <!-- Loading the uv3 figgy viewer, using an ajax call on the solr document arks. -->
      <!-- Currently we display no more than 2 viewers. -->
      <div id="view" class="intrinsic-container intrinsic-container-16x9"></div>
      <div id="view_1" class="intrinsic-container intrinsic-container-16x9"></div>
      <%= render 'shared/viewer_uv'%> 
  <% end %>
</div>
